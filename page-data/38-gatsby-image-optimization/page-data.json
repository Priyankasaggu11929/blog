{"componentChunkName":"component---src-templates-page-index-js","path":"/38-gatsby-image-optimization","result":{"data":{"mdx":{"frontmatter":{"title":"Gatsby - Image Optimization ðŸŒƒ","desc":"Image Optmization can be done with installing couple gatsby plugins.","banner":{"sharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACFUlEQVQoz21SPW/TUBTNv4CCVAQ/oAsBUcEMCzMTC0MlBDSFIhW1CIEqFD6S+NmOk9pVIcRfz/bzc1IiElD6kQ6oILrBgNQFBBIziP1w7dIW1AzX9/me43PPu9e5atiCHiVQQwkWxP9lhbIm2ij6LzDvLkElHstweYCvhQmqUQu59KHTS1r8l8B8Ac2PoHOBOVfHLfMhYS1UeQTNC6BQfY9LWR8mqO6CRH4mOMxuB8/XNqB7HDqJNzsCSqeDpf4q1fzsBupfIwcE024pWCExS75E0a7jslnGVLwCo9lAndyVQh2XFk3cFT2Y3EOZ799ouEMCKzQfKwjBBpu4v7GF+uo6GA+w4HlgHz5htjuA1e1hweHEjbN5pjHUYSqqEFiLYiTLAu8/buH3zx9w7CasWOLt5jo+f93Gt1/fUWq7qNCcq5JmKaL9paRi2t5SZCbI6NqGY8NMJF43FrFSnEc5knCW25CvuqivxZgYGFC5xAPWxyPrDXSx4zJzaIgWauTAoI9qcUKZZhKljqlzQOJErlOd0YYVCuZF1CzGY7OHq1e+4NrENlSvDSMmh8yXKLsCT22aiRvSOdjJTkC/TkSZo2QHFByKF2aYQoIV2vyTRoLpO+9QmOmj5FAj0sqNnpnC2PlZ5C/ew/Gz0zh88gZG8pM4cqqAQ3Q+ce52ho1dmMPR04UM28VH8tcxOj5J2EzGOTZ+E38AiUgumg0tnv4AAAAASUVORK5CYII=","aspectRatio":1.9824561403508771,"src":"/static/4e0290bbbabcc213a5ab24ae23de5842/62b1f/38-gatsby-image-optimization.png","srcSet":"/static/4e0290bbbabcc213a5ab24ae23de5842/e7519/38-gatsby-image-optimization.png 113w,\n/static/4e0290bbbabcc213a5ab24ae23de5842/7e7e9/38-gatsby-image-optimization.png 225w,\n/static/4e0290bbbabcc213a5ab24ae23de5842/62b1f/38-gatsby-image-optimization.png 450w,\n/static/4e0290bbbabcc213a5ab24ae23de5842/e2e7f/38-gatsby-image-optimization.png 675w,\n/static/4e0290bbbabcc213a5ab24ae23de5842/db955/38-gatsby-image-optimization.png 900w,\n/static/4e0290bbbabcc213a5ab24ae23de5842/a8378/38-gatsby-image-optimization.png 1024w","srcWebp":"/static/4e0290bbbabcc213a5ab24ae23de5842/b8a88/38-gatsby-image-optimization.webp","srcSetWebp":"/static/4e0290bbbabcc213a5ab24ae23de5842/3a3bf/38-gatsby-image-optimization.webp 113w,\n/static/4e0290bbbabcc213a5ab24ae23de5842/975bf/38-gatsby-image-optimization.webp 225w,\n/static/4e0290bbbabcc213a5ab24ae23de5842/b8a88/38-gatsby-image-optimization.webp 450w,\n/static/4e0290bbbabcc213a5ab24ae23de5842/761da/38-gatsby-image-optimization.webp 675w,\n/static/4e0290bbbabcc213a5ab24ae23de5842/210c1/38-gatsby-image-optimization.webp 900w,\n/static/4e0290bbbabcc213a5ab24ae23de5842/cc834/38-gatsby-image-optimization.webp 1024w","sizes":"(max-width: 450px) 100vw, 450px"}}}},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Gatsby - Image Optimization ðŸŒƒ\",\n  \"slug\": \"/38-gatsby-image-optimization\",\n  \"date\": \"2020-08-09T00:00:00.000Z\",\n  \"desc\": \"Image Optmization can be done with installing couple gatsby plugins.\",\n  \"cover\": {\n    \"img\": \"../../../photos/38-gatsby-image-optimization.png\"\n  },\n  \"banner\": \"../../banners/38-gatsby-image-optimization.png\",\n  \"tags\": [\"Gatsby\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"p\", null, mdx(\"span\", {\n    className: \"first-letter\"\n  }, \"I\"), \"n Gatsby, image optimization can be done with installing couple gatsby plugins. \\uD83D\\uDE0E\")), mdx(\"pre\", null, mdx(\"code\", {\n    \"className\": \"language-sh\",\n    \"parentName\": \"pre\"\n  }, \"$ npm i gatsby-transformer-sharp gatsby-plugin-sharp gatsby-background-image\\n\")), mdx(\"p\", null, mdx(\"p\", null, mdx(\"mark\", null, \"sharp\"), \" is third party library that does image transformation.\")), mdx(\"p\", null, \"The difference between \", mdx(\"strong\", {\n    \"parentName\": \"p\"\n  }, \"plugin\"), \" and \", mdx(\"strong\", {\n    \"parentName\": \"p\"\n  }, \"transformer\"), \", the \", mdx(\"inlineCode\", {\n    \"parentName\": \"p\"\n  }, \"plugin\"), \" is going to install Sharp and make Sharp available to do various things. The \", mdx(\"inlineCode\", {\n    \"parentName\": \"p\"\n  }, \"Transformer\"), \" looks for nodes that are images and will apply image transformation to them.\"), mdx(\"u\", null, mdx(\"p\", null, \"gatsby-config.js:\")), mdx(\"pre\", null, mdx(\"code\", {\n    \"className\": \"language-js\",\n    \"parentName\": \"pre\"\n  }, \"plugins: \\n  ['gatsby-transformer-sharp',\\n      'gatsby-plugin-sharp',\\n        {\\n      resolve: 'gatsby-source-filesystem',\\n      options: {\\n        name: 'images',\\n        path: 'images'\\n      }\\n    }\\n  ]\\n\")), mdx(\"p\", null, \"After adding above configs, Gatsby will understand that images need to be optimised which is in images folder and can be transformed by using above plugins.\"), mdx(\"p\", null, \"When you query below snippet:\"), mdx(\"pre\", null, mdx(\"code\", {\n    \"className\": \"language-js\",\n    \"parentName\": \"pre\"\n  }, \"query {\\n  allFile(filter:{sourceInstanceName: {eq: \\\"images\\\"}}){\\n    nodes{\\n      relativePath\\n      childImageSharp {\\n        original{\\n          width\\n          height\\n          src\\n        }\\n      }\\n    }\\n  }\\n}\\n\")), mdx(\"p\", null, \"In above query, you will filter \", mdx(\"inlineCode\", {\n    \"parentName\": \"p\"\n  }, \"sourceInstanceName\"), \" from allFile which is equal to \\\"images\\\"\"), mdx(\"p\", null, \"Then, will get the list of images in the path.\"), mdx(\"u\", null, mdx(\"p\", null, \"Output:\")), mdx(\"pre\", null, mdx(\"code\", {\n    \"className\": \"language-js\",\n    \"parentName\": \"pre\"\n  }, \"{\\n  \\\"data\\\": {\\n    \\\"allFile\\\": {\\n      \\\"nodes\\\": [\\n        {\\n          \\\"relativePath\\\": \\\"banner.jpg\\\",\\n          \\\"childImageSharp\\\": {\\n            \\\"original\\\": {\\n              \\\"width\\\": 3727,\\n              \\\"height\\\": 2383,\\n              \\\"src\\\": \\\"/static/banner-82e4fc0a6d4d32e6aa80db5e026cc3e3.jpg\\\"\\n            }\\n          }\\n        }\\n      ]\\n    }\\n  }\\n}\\n\")), mdx(\"p\", null, \"The above snippet will show the original file size or path, but you need to optimise the image. To do that you need to use fluid image under \", mdx(\"inlineCode\", {\n    \"parentName\": \"p\"\n  }, \"childImageSharp\")), mdx(\"pre\", null, mdx(\"code\", {\n    \"className\": \"language-js\",\n    \"parentName\": \"pre\"\n  }, \"query {\\n  allFile(filter:{sourceInstanceName: {eq: \\\"images\\\"}}){\\n    nodes{\\n      relativePath\\n      childImageSharp {\\n        fluid{\\n          src\\n          srcSet\\n        }\\n      }\\n    }\\n  }\\n}\\n\")), mdx(\"p\", null, \"After above query, you will get \", mdx(\"inlineCode\", {\n    \"parentName\": \"p\"\n  }, \"list of optimised images\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    \"className\": \"language-query\",\n    \"parentName\": \"pre\"\n  }, \"{\\n  \\\"data\\\": {\\n    \\\"allFile\\\": {\\n      \\\"nodes\\\": [\\n        {\\n          \\\"relativePath\\\": \\\"banner.jpg\\\",\\n          \\\"childImageSharp\\\": {\\n            \\\"fluid\\\": {\\n              \\\"src\\\": \\\"/static/82e4fc0a6d4d32e6aa80db5e026cc3e3/14b42/banner.jpg\\\",\\n              \\\"srcSet\\\": \\\"/static/82e4fc0a6d4d32e6aa80db5e026cc3e3/f836f/banner.jpg 200w,\\n                        \\\\\\\\n/static/82e4fc0a6d4d32e6aa80db5e026cc3e3/2244e/banner.jpg 400w,\\n                        \\\\\\\\n/static/82e4fc0a6d4d32e6aa80db5e026cc3e3/14b42/banner.jpg 800w,\\n                        \\\\\\\\n/static/82e4fc0a6d4d32e6aa80db5e026cc3e3/47498/banner.jpg 1200w,\\n                        \\\\\\\\n/static/82e4fc0a6d4d32e6aa80db5e026cc3e3/0e329/banner.jpg 1600w,\\n                        \\\\\\\\n/static/82e4fc0a6d4d32e6aa80db5e026cc3e3/91e14/banner.jpg 3727w\\\"\\n            }\\n          }\\n        }\\n      ]\\n    }\\n  }\\n}\\n\")), mdx(\"p\", null, mdx(\"p\", null, mdx(\"mark\", null, \"Gatsby\"), \" taken all images and its created a while array of different size for different viewports and different resolutions.\")), mdx(\"p\", null, mdx(\"strong\", {\n    \"parentName\": \"p\"\n  }, \"How you create alias in graphql\\u2753\\uD83E\\uDD14\")), mdx(\"pre\", null, mdx(\"code\", {\n    \"className\": \"language-js\",\n    \"parentName\": \"pre\"\n  }, \"image: childImageSharp {}\\n\\n\\n// output\\n\\\"image\\\": {}\\n\")), mdx(\"h2\", null, mdx(LinkPost, {\n    href: \"https://www.gatsbyjs.org/docs/using-graphql-fragments/\",\n    name: \"GraphQl Fragment\",\n    mdxType: \"LinkPost\"\n  })), mdx(\"p\", null, \"Its almost same as Javascript spread operator. \\uD83D\\uDE2F\"), mdx(\"p\", null, mdx(\"strong\", {\n    \"parentName\": \"p\"\n  }, \"How to use it in component \\uD83E\\uDD14\")), mdx(\"pre\", null, mdx(\"code\", {\n    \"className\": \"language-jsx\",\n    \"parentName\": \"pre\"\n  }, \"import React from 'react'\\nimport './hero.scss'\\nimport {Link, graphql, useStaticQuery} from 'gatsby'\\nimport BackgroundImage from 'gatsby-background-image'\\n\\nconst Hero = () => {\\n  const {image} = useStaticQuery(graphql`\\n    query {\\n      image: file(relativePath: {eq: \\\"banner.jpg\\\"}){\\n        sharp: childImageSharp {\\n          fluid {\\n            ...GatsbyImageSharpFluid_withWebp\\n          }\\n        }\\n      }\\n    }\\n  `)\\n\\n  return (\\n    <BackgroundImage className=\\\"hero-bg\\\" fluid={image.sharp.fluid} fadeIn=\\\"soft\\\">\\n      <div className='text-box'>\\n        <h1>Learning Gatsby</h1>\\n        <p>Hello, <Link to='/about/'>Learn about me &rarr;</Link></p>\\n      </div>\\n      </BackgroundImage>\\n  )\\n}\\n\\nexport default Hero\\n\")), mdx(\"p\", null, \"In helpers, Gatsby provides a few helpers \", mdx(\"inlineCode\", {\n    \"parentName\": \"p\"\n  }, \"GatsbyImageSharpFluid_withWebp\"), \" which will take care of all resolution and if \", mdx(\"inlineCode\", {\n    \"parentName\": \"p\"\n  }, \"webp\"), \" doesn't work on browser then it will take care of what image need to shown at the place.\"), mdx(\"p\", null, mdx(\"p\", null, mdx(\"mark\", null, \"fadeIn\"), \" is going to cause really nice blur in image. Once you reload, it will first show blur image and then original image shown.\")), mdx(\"p\", null, \"I have added the image optimisation code \", mdx(LinkPost, {\n    href: \"https://github.com/suprabhasupi/gatsby-intro/commit/4e50fc5efa4c6244e6bc4798295c21607cda02bd\",\n    name: \"here\",\n    mdxType: \"LinkPost\"\n  }), \" \\u263A\\uFE0F\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"slug":"/38-gatsby-image-optimization"}},"staticQueryHashes":["1691836396"]}